webpackJsonp([3],{"1SVD":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("Xxa5"),i=r.n(o),s=r("exGp"),a=r.n(s),n=r("1h8J"),c={data:function(){return{popVisible:!1,infos:[],settlement_price:0,market_price:0,platform_cost_price:0,ordinary_price:0,vip_price:0,curGoodsId:"",goodsName:"",draft:""}},methods:{showDetail:function(t,e){var r=this;return a()(i.a.mark(function o(){var s,a;return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r.curGoodsId=t.id,r.goodsName=t.goods_name,r.draft=e,s={id:t.id,draft:e},o.next=6,Object(n.k)(s);case 6:0==(a=o.sent).code?(r.popVisible=!0,r.infos=a.data):r.$message.error(a.message);case 8:case"end":return o.stop()}},o,r)}))()},setPrice:function(t){var e=this;0==t?this.infos.map(function(t,r){e.$set(e.infos[r],"settlement_price",e.settlement_price)}):1==t?this.infos.map(function(t,r){e.$set(e.infos[r],"platform_cost_price",e.platform_cost_price)}):2==t?this.infos.map(function(t,r){e.$set(e.infos[r],"ordinary_price",e.ordinary_price)}):3==t?this.infos.map(function(t,r){e.$set(e.infos[r],"vip_price",e.vip_price)}):4==t&&this.infos.map(function(t,r){e.$set(e.infos[r],"market_price",e.market_price)})},opSave:function(){var t=this;return a()(i.a.mark(function e(){var r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.infos.map(function(t){r.push({id:t.id,settlement_price:t.settlement_price,platform_cost_price:t.platform_cost_price,ordinary_price:t.ordinary_price,vip_price:t.vip_price,market_price:t.market_price})}),e.next=4,Object(n.O)({goods_id:t.curGoodsId,goods_price:r,draft:t.draft});case 4:0==(o=e.sent).code?(t.popVisible=!1,t.$message({message:"操作成功",type:"success"}),t.$parent.getData()):t.$message.error(o.message);case 6:case"end":return e.stop()}},e,t)}))()},doSave:function(){this.settlement_price=0,this.market_price=0,this.platform_cost_price=0,this.ordinary_price=0,this.vip_price=0,this.opSave()}}},l={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-dialog",{attrs:{center:"",title:"价格调整",visible:t.popVisible,width:"60%"},on:{"update:visible":function(e){t.popVisible=e}}},[r("el-row",{staticClass:"mt2"},[t._v("商品名称："+t._s(t.goodsName))]),t._v(" "),r("el-row",{staticClass:"mt2"},[r("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),r("el-col",{attrs:{span:3}},[t._v(" ")]),t._v(" "),r("el-col",{attrs:{span:4}},[t._v("结算价(元)")]),t._v(" "),r("el-col",{attrs:{span:4}},[t._v("平台成本")]),t._v(" "),r("el-col",{attrs:{span:4}},[t._v("普通价")]),t._v(" "),r("el-col",{attrs:{span:4}},[t._v("VIP价")]),t._v(" "),r("el-col",{attrs:{span:4}},[t._v("市场价")])],1),t._v(" "),t.infos.length?[t._l(t.infos,function(e,o){return r("el-row",{key:o,staticClass:"mt2 vFlex"},[r("el-col",{attrs:{span:1}},[t._v(t._s(o+1))]),t._v(" "),r("el-col",{attrs:{span:3}},[t._v(t._s(e.sku_name))]),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:2,min:0},model:{value:e.settlement_price,callback:function(r){t.$set(e,"settlement_price",r)},expression:"item.settlement_price"}})],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:2,min:0},model:{value:e.platform_cost_price,callback:function(r){t.$set(e,"platform_cost_price",r)},expression:"item.platform_cost_price"}})],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:2,min:0},model:{value:e.ordinary_price,callback:function(r){t.$set(e,"ordinary_price",r)},expression:"item.ordinary_price"}})],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:2,min:0},model:{value:e.vip_price,callback:function(r){t.$set(e,"vip_price",r)},expression:"item.vip_price"}})],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:2,min:0},model:{value:e.market_price,callback:function(r){t.$set(e,"market_price",r)},expression:"item.market_price"}})],1)],1)}),t._v(" "),r("el-row",{staticClass:"mt2 vFlex"},[r("el-col",{attrs:{span:4}},[t._v("批量调整")]),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:2,min:0},model:{value:t.settlement_price,callback:function(e){t.settlement_price=e},expression:"settlement_price"}}),t._v(" "),r("el-button",{on:{click:function(e){return t.setPrice(0)}}},[t._v("确定")])],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:2,min:0},model:{value:t.platform_cost_price,callback:function(e){t.platform_cost_price=e},expression:"platform_cost_price"}}),t._v(" "),r("el-button",{on:{click:function(e){return t.setPrice(1)}}},[t._v("确定")])],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:2,min:0},model:{value:t.ordinary_price,callback:function(e){t.ordinary_price=e},expression:"ordinary_price"}}),t._v(" "),r("el-button",{on:{click:function(e){return t.setPrice(2)}}},[t._v("确定")])],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:2,min:0},model:{value:t.vip_price,callback:function(e){t.vip_price=e},expression:"vip_price"}}),t._v(" "),r("el-button",{on:{click:function(e){return t.setPrice(3)}}},[t._v("确定")])],1),t._v(" "),r("el-col",{attrs:{span:4}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:2,min:0},model:{value:t.market_price,callback:function(e){t.market_price=e},expression:"market_price"}}),t._v(" "),r("el-button",{on:{click:function(e){return t.setPrice(4)}}},[t._v("确定")])],1)],1)]:t._e(),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:t.doSave}},[t._v("保存")])],1)],2)],1)},staticRenderFns:[]};var p={data:function(){return{popVisible:!1,infos:[],goodsName:"",curGoodsId:"",draft:""}},methods:{showDetail:function(t,e){var r=this;return a()(i.a.mark(function o(){var s;return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r.curGoodsId=t.id,r.infos=t,r.goodsName=t.goods_name,r.draft=e,o.next=6,Object(n.k)({id:t.id,draft:e});case 6:0==(s=o.sent).code?(r.popVisible=!0,r.infos=s.data):r.$message.error(s.message);case 8:case"end":return o.stop()}},o,r)}))()},doSave:function(){var t=this;return a()(i.a.mark(function e(){var r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.infos.map(function(t){r.push({id:t.id,stock:t.stock})}),e.next=4,Object(n.R)({goods_id:t.curGoodsId,goods_sku:r,draft:t.draft});case 4:0==(o=e.sent).code?(t.popVisible=!1,t.$message({message:"操作成功",type:"success"}),t.$parent.getData()):t.$message.error(o.message);case 6:case"end":return e.stop()}},e,t)}))()}}},_={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-dialog",{attrs:{center:"",title:"调整库存",visible:t.popVisible,width:"30%"},on:{"update:visible":function(e){t.popVisible=e}}},[r("el-row",[t._v("商品名称："+t._s(t.goodsName))]),t._v(" "),t.infos.length?t._l(t.infos,function(e,o){return r("el-row",{key:o,staticClass:"mt2 vertical"},[r("el-col",{attrs:{span:8}},[t._v(t._s(o+1))]),t._v(" "),r("el-col",{attrs:{span:8}},[t._v(t._s(e.sku_name))]),t._v(" "),r("el-col",{attrs:{span:8}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:0,min:0},model:{value:e.stock,callback:function(r){t.$set(e,"stock",r)},expression:"item.stock"}})],1)],1)}):t._e(),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:t.doSave}},[t._v("保存")])],1)],2)],1)},staticRenderFns:[]};var u={data:function(){return{popVisible:!1,infos:[],curGoodsId:"",goodsName:"",vip_self_profit_ratio:0,vip_higher_profit_ratio:0,ordinary_user_profit_ratio:0,draft:""}},methods:{showDetail:function(t,e){var r=this;return a()(i.a.mark(function o(){var s;return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r.curGoodsId=t.id,r.goodsName=t.goods_name,r.draft=e,o.next=5,Object(n.k)({id:t.id,draft:e});case 5:0==(s=o.sent).code?(r.popVisible=!0,r.infos=s.data):r.$message.error(s.message);case 7:case"end":return o.stop()}},o,r)}))()},setRake:function(t){var e=this;0==t?this.infos.map(function(t,r){e.$set(e.infos[r],"vip_self_profit_ratio",e.vip_self_profit_ratio)}):1==t?this.infos.map(function(t,r){e.$set(e.infos[r],"vip_higher_profit_ratio",e.vip_higher_profit_ratio)}):2==t&&this.infos.map(function(t,r){e.$set(e.infos[r],"ordinary_user_profit_ratio",e.ordinary_user_profit_ratio)})},opSave:function(){var t=this;return a()(i.a.mark(function e(){var r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.infos.map(function(t){r.push({id:t.id,vip_self_profit_ratio:t.vip_self_profit_ratio,vip_higher_profit_ratio:t.vip_higher_profit_ratio,ordinary_user_profit_ratio:t.ordinary_user_profit_ratio})}),e.next=4,Object(n.P)({goods_id:t.curGoodsId,rake_back:r,draft:t.draft});case 4:0==(o=e.sent).code?(t.popVisible=!1,t.$message({message:"操作成功",type:"success"}),t.$parent.getData()):t.$message.error(o.message);case 6:case"end":return e.stop()}},e,t)}))()},doSave:function(){this.vip_self_profit_ratio=0,this.vip_higher_profit_ratio=0,this.ordinary_user_profit_ratio=0,this.opSave()}}},f={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-dialog",{attrs:{center:"",title:"返佣比例调整",visible:t.popVisible,width:"60%"},on:{"update:visible":function(e){t.popVisible=e}}},[r("el-row",{staticClass:"mt2"},[t._v("商品名称："+t._s(t.goodsName))]),t._v(" "),r("el-row",{staticClass:"mt2"},[r("el-col",{attrs:{span:3}},[t._v(" ")]),t._v(" "),r("el-col",{attrs:{span:3}},[t._v(" ")]),t._v(" "),r("el-col",{attrs:{span:6}},[t._v("VIP自购")]),t._v(" "),r("el-col",{attrs:{span:6}},[t._v("VIP上级")]),t._v(" "),r("el-col",{attrs:{span:6}},[t._v("普通用户上级")])],1),t._v(" "),t.infos.length?[t._l(t.infos,function(e,o){return r("el-row",{key:o,staticClass:"mt2 vFlex"},[r("el-col",{attrs:{span:3}},[t._v(t._s(o+1))]),t._v(" "),r("el-col",{attrs:{span:3}},[t._v(t._s(e.sku_name))]),t._v(" "),r("el-col",{attrs:{span:6}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:2,min:0},model:{value:e.vip_self_profit_ratio,callback:function(r){t.$set(e,"vip_self_profit_ratio",r)},expression:"item.vip_self_profit_ratio"}}),t._v("%\n                ")],1),t._v(" "),r("el-col",{attrs:{span:6}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:2,min:0},model:{value:e.vip_higher_profit_ratio,callback:function(r){t.$set(e,"vip_higher_profit_ratio",r)},expression:"item.vip_higher_profit_ratio"}}),t._v("%\n                ")],1),t._v(" "),r("el-col",{attrs:{span:6}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,precision:2,min:0},model:{value:e.ordinary_user_profit_ratio,callback:function(r){t.$set(e,"ordinary_user_profit_ratio",r)},expression:"item.ordinary_user_profit_ratio"}}),t._v("%\n                ")],1)],1)}),t._v(" "),r("el-row",{staticClass:"mt2 vFlex"},[r("el-col",{attrs:{span:6}},[t._v("批量调整")]),t._v(" "),r("el-col",{attrs:{span:6}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,min:0,precision:2},model:{value:t.vip_self_profit_ratio,callback:function(e){t.vip_self_profit_ratio=e},expression:"vip_self_profit_ratio"}}),t._v("%\n                    "),r("el-button",{on:{click:function(e){return t.setRake(0)}}},[t._v("确定")])],1),t._v(" "),r("el-col",{attrs:{span:6}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,min:0,precision:2},model:{value:t.vip_higher_profit_ratio,callback:function(e){t.vip_higher_profit_ratio=e},expression:"vip_higher_profit_ratio"}}),t._v("%\n                    "),r("el-button",{on:{click:function(e){return t.setRake(1)}}},[t._v("确定")])],1),t._v(" "),r("el-col",{attrs:{span:6}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{controls:!1,min:0,precision:2},model:{value:t.ordinary_user_profit_ratio,callback:function(e){t.ordinary_user_profit_ratio=e},expression:"ordinary_user_profit_ratio"}}),t._v("%\n                    "),r("el-button",{on:{click:function(e){return t.setRake(2)}}},[t._v("确定")])],1)],1)]:t._e(),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:t.doSave}},[t._v("保存")])],1)],2)],1)},staticRenderFns:[]};var d={data:function(){return{dialogVisible:!1,origionPic:"",multipleSelection:[],tableData:[],curPage:1,page_size:10,total:0,form:{goods_code:"",goods_name:""}}},components:{BalancePop:r("VU/8")(c,l,!1,function(t){r("kshr")},"data-v-6ed09c09",null).exports,StockPop:r("VU/8")(p,_,!1,function(t){r("CTm5")},"data-v-72321068",null).exports,RakePop:r("VU/8")(u,f,!1,function(t){r("Q8Ki")},"data-v-255fda6e",null).exports},mounted:function(){this.getData()},methods:{doReset:function(){this.curPage=1,this.form={goods_code:"",goods_name:""},this.getData()},doSearch:function(){this.curPage=1,this.getData()},getData:function(){var t=this;return a()(i.a.mark(function e(){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.G)({page:t.curPage,page_size:t.page_size,goods_code:t.form.goods_code,goods_name:t.form.goods_name});case 2:0==(r=e.sent).code&&(t.total=r.data.total,t.tableData=r.data.data);case 4:case"end":return e.stop()}},e,t)}))()},opSet:function(t,e,r){var o=this;return a()(i.a.mark(function s(){var a,c;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=[t],i.next=3,Object(n.n)({id:a,type:e,status:r});case 3:0==(c=i.sent).code?(o.$message({type:"success",message:"操作成功!"}),o.getData()):o.$message.error(c.message);case 5:case"end":return i.stop()}},s,o)}))()},opAllSet:function(t,e){var r=this;return a()(i.a.mark(function o(){var s,a;return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(s=[],r.multipleSelection.length){o.next=4;break}return r.$message.error("请选择要操作的商品"),o.abrupt("return");case 4:return r.multipleSelection.forEach(function(t){s.push(t.id)}),o.next=7,Object(n.n)({id:s,type:t,status:e});case 7:0==(a=o.sent).code?(r.$message({type:"success",message:"操作成功!"}),r.getData()):r.$message.error(a.message);case 9:case"end":return o.stop()}},o,r)}))()},handleCurrentChange:function(t){this.curPage=t,this.getData()},handleSelectionChange:function(t){this.multipleSelection=t},previewImg:function(t){this.dialogVisible=!0,this.origionPic=t},prePrice:function(t,e){this.$refs.balancePop.showDetail(t,e)},preRake:function(t,e){this.$refs.rakePop.showDetail(t,e)},preStock:function(t,e){this.$refs.stockPop.showDetail(t,e)}}},v={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-form",{staticClass:"demo-form-inline mb2",attrs:{inline:!0,model:t.form}},[r("el-form-item",{staticClass:"mr2",attrs:{label:"商品编号","label-width":"100px"}},[r("el-input",{attrs:{maxlength:"11",placeholder:"商品编号"},model:{value:t.form.goods_code,callback:function(e){t.$set(t.form,"goods_code",e)},expression:"form.goods_code"}})],1),t._v(" "),r("el-form-item",{staticClass:"mr2",attrs:{label:"商品名称","label-width":"100px"}},[r("el-input",{attrs:{maxlength:"11",placeholder:"商品名称"},model:{value:t.form.goods_name,callback:function(e){t.$set(t.form,"goods_name",e)},expression:"form.goods_name"}})],1),t._v(" "),r("el-form-item",[r("el-button",{staticClass:"mr2",on:{click:t.doReset}},[t._v("重置")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.doSearch}},[t._v("查询")])],1)],1),t._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),r("el-table-column",{attrs:{prop:"goods_code",label:"编号"}}),t._v(" "),r("el-table-column",{attrs:{label:"商品封面图"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("img",{staticClass:"smallPic",attrs:{src:e.row.picture,alt:""},on:{click:function(r){return t.previewImg(e.row.picture)}}})]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),t._v(" "),r("el-table-column",{attrs:{prop:"category_name",label:"所属分类"}}),t._v(" "),r("el-table-column",{attrs:{label:"商品类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.type?r("span",[t._v("实物")]):t._e(),t._v(" "),1==e.row.type?r("span",[t._v("虚拟")]):t._e()]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"定价(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v("普通价："+t._s(e.row.ordinary_price))]),t._v(" "),r("div",[t._v("VIP价："+t._s(e.row.vip_price))]),t._v(" "),r("div",[t._v("平台成本："+t._s(e.row.platform_cost_price))]),t._v(" "),r("div",[t._v("结算价："+t._s(e.row.settlement_price))]),t._v(" "),r("div",[t._v("市场价："+t._s(e.row.market_price))]),t._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.prePrice(e.row,0)}}},[t._v("调整")])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"返佣"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(t._s(e.row.vip_self_profit_ratio)+"%")]),t._v(" "),r("div",[t._v(t._s(e.row.vip_higher_profit_ratio)+"%")]),t._v(" "),r("div",[t._v(t._s(e.row.ordinary_user_profit_ratio)+"%")]),t._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.preRake(e.row,0)}}},[t._v("调整")])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(t._s(e.row.sum_stock))]),t._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.preStock(e.row,0)}}},[t._v("调整")])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"created_at",label:"推荐时间"}}),t._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.is_recommend?r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.opSet(e.row.id,"recommend",1)}}},[t._v("推荐")]):t._e(),t._v(" "),1==e.row.is_recommend?r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.opSet(e.row.id,"recommend",0)}}},[t._v("取消推荐")]):t._e()]}}])})],1),t._v(" "),t.tableData.length?r("el-row",{staticStyle:{float:"left","margin-top":"20px"}},[r("el-button",{attrs:{type:"text"},on:{click:function(e){return t.opAllSet("recommend",0)}}},[t._v("取消推荐")])],1):t._e(),t._v(" "),r("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("img",{attrs:{width:"100%",src:t.origionPic,alt:""}})]),t._v(" "),r("BalancePop",{ref:"balancePop"}),t._v(" "),r("StockPop",{ref:"stockPop"}),t._v(" "),r("RakePop",{ref:"rakePop"}),t._v(" "),r("el-pagination",{staticClass:"pubPagation",attrs:{"current-page":t.curPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.curPage=e},"update:current-page":function(e){t.curPage=e}}})],1)},staticRenderFns:[]};var m=r("VU/8")(d,v,!1,function(t){r("N0PB")},"data-v-6a606773",null);e.default=m.exports},CTm5:function(t,e){},N0PB:function(t,e){},Q8Ki:function(t,e){},kshr:function(t,e){}});
//# sourceMappingURL=3.9f039ccb17f7f7318101.js.map