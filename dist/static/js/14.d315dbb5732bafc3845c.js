webpackJsonp([14],{"30tK":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),r=a.n(s),o=a("exGp"),n=a.n(o),c=a("1h8J"),l={data:function(){return{dialogVisible:!1,isEdit:!1,cform:{count:"",password:"",name:"",tel:"",company:""},userName:"",curPage:1,page_size:10,total:0,tableData:[],curUserId:""}},mounted:function(){this.getData()},methods:{doSearch:function(){this.curPage=1,this.getData()},handleCurrentChange:function(t){this.curPage=t,this.getData()},getData:function(){var t=this;return n()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.V)({page:t.curPage,page_size:t.page_size,keywords:t.userName});case 2:0==(a=e.sent).code&&(t.tableData=a.data.data,t.total=a.data.total);case 4:case"end":return e.stop()}},e,t)}))()},handleClose:function(){this.dialogVisible=!1,this.cform={count:"",password:"",name:"",tel:"",company:""}},checkInfos:function(){var t=!0;return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(this.cform.count)?6!=this.cform.password.trim().length?(this.$message({message:"密码格式不正确",type:"warning"}),t=!1):this.cform.name?/^1[3456789]\d{9}$/.test(this.cform.tel)?this.cform.company?t=!0:(this.$message({message:"公司名称不能为空",type:"warning"}),t=!1):(this.$message({message:"联系电话格式不正确",type:"warning"}),t=!1):(this.$message({message:"联系人不能为空",type:"warning"}),t=!1):(this.$message({message:"账号格式不正确",type:"warning"}),t=!1),t},doAdd:function(){this.dialogVisible=!0,this.isEdit=!1,this.curUserId="",this.cform={count:"",password:"",name:"",tel:"",company:""}},doEdit:function(t){var e=this;return n()(r.a.mark(function a(){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.dialogVisible=!0,e.isEdit=!0,e.curUserId=t.id,a.next=5,Object(c.U)({id:t.id});case 5:0==(s=a.sent).code&&(e.cform={count:s.data.supplier_account,password:s.data.password,name:s.data.contacts,tel:s.data.mobile,company:s.data.company});case 7:case"end":return a.stop()}},a,e)}))()},opStatus:function(t,e){var a=this;return n()(r.a.mark(function s(){var o;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(c.S)({id:t.id,status:e});case 2:0==(o=s.sent).code?(a.$message({showClose:!0,message:"操作成功",type:"success"}),a.getData()):a.$message({showClose:!0,message:o.message,type:"error"});case 4:case"end":return s.stop()}},s,a)}))()},doOperate:function(t,e){var a=this;0==e?this.$confirm("此操作将停用该账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.opStatus(t,e)}):this.opStatus(t,e)},doConfirm:function(){var t=this;return n()(r.a.mark(function e(){var a,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.checkInfos()){e.next=2;break}return e.abrupt("return");case 2:return a={},a=t.isEdit?{password:t.cform.password,contacts:t.cform.name,mobile:t.cform.tel,id:t.curUserId}:{supplier_account:t.cform.count,company:t.cform.company,mobile:t.cform.tel,contacts:t.cform.name,password:t.cform.password},e.next=6,Object(c.A)(a);case 6:0==(s=e.sent).code?(t.$message({showClose:!0,message:"操作成功",type:"success"}),t.getData(),t.dialogVisible=!1):t.$message({showClose:!0,message:s.message,type:"error"});case 8:case"end":return e.stop()}},e,t)}))()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("el-row",{staticClass:"mb2 hFlex"},[a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"primary"},on:{click:t.doAdd}},[t._v("新增供应商")])],1),t._v(" "),a("el-col",{staticClass:"end",attrs:{span:16}},[a("el-input",{staticClass:"mr2",staticStyle:{width:"150px"},attrs:{placeholder:"请输入供应商名"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.doSearch}},[t._v("查询")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"created_at",label:"注册时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"supplier_account",label:"账号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"company",label:"公司名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contacts",label:"联系人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.doEdit(e.row)}}},[t._v("修改")]),t._v(" "),1==e.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.doOperate(e.row,0)}}},[t._v("停用")]):t._e(),t._v(" "),0==e.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.doOperate(e.row,1)}}},[t._v("启用")]):t._e()]}}])})],1),t._v(" "),a("el-pagination",{staticClass:"pubPagation",attrs:{"current-page":t.curPage,"page-size":10,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.curPage=e},"update:current-page":function(e){t.curPage=e}}}),t._v(" "),a("el-dialog",{attrs:{title:t.isEdit?"修改管理员账号信息":"新增管理员账号",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"cform",attrs:{model:t.cform,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"账号：",prop:"count"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{disabled:t.isEdit,placeholder:"请输入电子邮箱"},model:{value:t.cform.count,callback:function(e){t.$set(t.cform,"count",e)},expression:"cform.count"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码：",prop:"password"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{maxlength:6,minlength:6,placeholder:"请输入6位密码","show-password":""},model:{value:t.cform.password,callback:function(e){t.$set(t.cform,"password",e)},expression:"cform.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人：",prop:"name"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入用户姓名"},model:{value:t.cform.name,callback:function(e){t.$set(t.cform,"name",e)},expression:"cform.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系电话：",prop:"tel"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{maxlength:11,minlength:11,placeholder:"请输入联系电话"},model:{value:t.cform.tel,callback:function(e){t.$set(t.cform,"tel",e)},expression:"cform.tel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"公司名称：",prop:"company"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{disabled:t.isEdit,placeholder:"请输入公司名称"},model:{value:t.cform.company,callback:function(e){t.$set(t.cform,"company",e)},expression:"cform.company"}})],1)],1),t._v(" "),a("el-row",{staticClass:"hFlex"},[a("el-button",{staticClass:"mt2",attrs:{type:"primary"},on:{click:t.doConfirm}},[t._v(t._s(t.isEdit?"保存":"新增"))])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,i,!1,function(t){a("QKtV")},"data-v-7c3ff500",null);e.default=u.exports},QKtV:function(t,e){}});
//# sourceMappingURL=14.d315dbb5732bafc3845c.js.map