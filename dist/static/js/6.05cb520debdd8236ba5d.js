webpackJsonp([6],{"5tsj":function(e,t){},Qujz:function(e,t){},xk89:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),s=a("exGp"),i=a.n(s),o=a("uaSg"),l=a("1h8J"),c={data:function(){return{dialogVisible:!1,title:"新增品牌",brandName:"",logoPic:"",baseUrl:"",imageUrl:"",options:[],loading:!1,curBrandId:""}},props:["source"],mounted:function(){this.baseUrl=o.b},methods:{opSave:function(){var e=this;return i()(n.a.mark(function t(){var a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={},a=e.curBrandId?{image_url:e.logoPic,brand_name:e.brandName,id:e.curBrandId}:{image_url:e.logoPic,brand_name:e.brandName},t.next=4,Object(l.x)(a);case 4:0==(r=t.sent).code?(e.$message({showClose:!0,message:"创建成功",type:"success"}),e.$parent.getData(),e.dialogVisible=!1):e.$message({showClose:!0,message:r.message,type:"error"});case 6:case"end":return t.stop()}},t,e)}))()},doSave:function(){this.brandName?this.logoPic?this.opSave():this.$message({showClose:!0,message:"请上传品牌图片",type:"warning"}):this.$message({showClose:!0,message:"请输入品牌名称",type:"warning"})},showBrandPop:function(e){this.dialogVisible=!0,e?(this.title="编辑品牌",this.curBrandId=e.id,this.logoPic=e.image_url,this.brandName=e.brand_name,this.imageUrl=e.image_url_full):(this.title="新增品牌",this.curBrandId="",this.logoPic="",this.brandName="",this.imageUrl="")},handleClose:function(){this.dialogVisible=!1,this.brandName="",this.logoPic="",this.imageUrl=""},beforeAvatarUpload:function(e){var t="image/png"===e.type||"image/jpg"===e.type||"image/jpeg"===e.type,a=e.size/1024/1024<.2;return t?!!a||(this.$message.error("上传图片大小不能超过 200k!"),!1):(this.$message.error("上传图片格式有误!"),!1)},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw),this.logoPic=e.data.url,this.imgId=e.data.id}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"virForm",attrs:{title:e.title,visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-row",{staticClass:"flex mb2"},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入品牌名称"},model:{value:e.brandName,callback:function(t){e.brandName=t},expression:"brandName"}})],1),e._v(" "),a("el-row",{staticClass:"flex ruleForm"},[a("el-row",{staticClass:"vFlex"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"before-upload":e.beforeAvatarUpload,action:e.baseUrl+"/admin/upload/img","show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),a("el-row",{staticClass:"mt2"},[e._v("格式：png、jpg；尺寸：M*N；200K以内")])],1)],1),e._v(" "),a("el-row",{staticClass:"flex mt2"},[a("el-button",{attrs:{type:"primary"},on:{click:e.doSave}},[e._v(e._s("新增品牌"==e.title?"新增品牌":"保存"))])],1)],1)],1)},staticRenderFns:[]};var u={data:function(){return{brandName:"",curPage:1,page_size:10,total:0,dialogVisible:!1,origionPic:"",tableData:[]}},components:{AddBrand:a("VU/8")(c,d,!1,function(e){a("Qujz")},"data-v-21d01d92",null).exports},mounted:function(){this.getData()},methods:{getData:function(){var e=this;return i()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.e)({page:e.curPage,page_size:e.page_size,brand_name:e.brandName});case 2:0==(a=t.sent).code&&(e.tableData=a.data.data,e.total=a.data.total);case 4:case"end":return t.stop()}},t,e)}))()},handleCurrentChange:function(e){this.curPage=e,this.getData()},previewImg:function(e){this.dialogVisible=!0,this.origionPic=e},doSearch:function(){this.curPage=1,this.getData()},addBrand:function(){this.$refs.addBrand.showBrandPop()},editRow:function(e){this.$refs.addBrand.showBrandPop(e)},opDel:function(e){var t=this;return i()(n.a.mark(function a(){var r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.g)({id:e.id});case 2:0==(r=a.sent).code?(t.$message({showClose:!0,message:"操作成功",type:"success"}),t.getData()):t.$message({showClose:!0,message:r.message,type:"error"});case 4:case"end":return a.stop()}},a,t)}))()},doDel:function(e){var t=this;this.$confirm("此操作将删除该品牌, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.opDel(e)})}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-row",{staticClass:"flex mb2"},[a("el-col",{attrs:{span:20}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入品牌名称"},model:{value:e.brandName,callback:function(t){e.brandName=t},expression:"brandName"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.doSearch}},[e._v("查询品牌")])],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addBrand}},[e._v("新增品牌")])],1)],1),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{label:"商标图"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticClass:"smallPic",attrs:{src:t.row.image_url_full,alt:""},on:{click:function(a){return e.previewImg(t.row.image_url_full)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"brand_name",label:"品牌"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editRow(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.doDel(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("AddBrand",{ref:"addBrand"}),e._v(" "),a("el-pagination",{staticClass:"pubPagation",attrs:{"current-page":e.curPage,"page-size":10,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.curPage=t},"update:current-page":function(t){e.curPage=t}}}),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.origionPic,alt:""}})])],1)},staticRenderFns:[]};var p=a("VU/8")(u,g,!1,function(e){a("5tsj")},"data-v-51fa602f",null);t.default=p.exports}});
//# sourceMappingURL=6.05cb520debdd8236ba5d.js.map