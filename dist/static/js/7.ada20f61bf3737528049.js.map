{"version":3,"sources":["webpack:///src/page/goodsManage/components/AddNewClass.vue","webpack:///./src/page/goodsManage/components/AddNewClass.vue?1fc8","webpack:///./src/page/goodsManage/components/AddNewClass.vue","webpack:///src/page/goodsManage/ClassifyManage.vue","webpack:///./src/page/goodsManage/ClassifyManage.vue?5800","webpack:///./src/page/goodsManage/ClassifyManage.vue"],"names":["AddNewClass","data","isEdit","isMain","dialogVisible","title","brandName","logoPic","baseUrl","imageUrl","fid","id","mounted","this","env","methods","doSave","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","res","wrap","_context","prev","next","$message","showClose","message","type","abrupt","cate_name","image_url","Object","api_getData","sent","code","$parent","getData","stop","showClassPop","row","image_url_full","handleClose","beforeAvatarUpload","file","isPic","isLt","size","error","handleAvatarSuccess","URL","createObjectURL","raw","url","imgId","components_AddNewClass","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","visible","width","before-close","on","update:visible","$event","staticStyle","placeholder","model","value","callback","$$v","expression","_v","before-upload","action","show-file-list","on-success","src","click","_s","staticRenderFns","ClassifyManage","page_size","curPage","total","tableData","origionPic","components","__webpack_require__","normalizeComponent","ssrContext","previewImg","imgStr","page","forEach","item","son","length","candel","addMainClass","$refs","addNewClass","addSubClass","editRow","delRow","_this2","_callee2","_context2","$confirm","confirmButtonText","cancelButtonText","then","goodsManage_ClassifyManage","span","row-key","tree-props","children","hasChildren","prop","label","scopedSlots","_u","key","fn","scope","alt","_e","ref","ClassifyManage_Component","ClassifyManage_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/7.ada20f61bf3737528049.js","sourcesContent":["<template>\n    <div>\n        <el-dialog\n            class=\"virForm\"\n            :title=\"title\"\n            :visible.sync=\"dialogVisible\"\n            width=\"30%\"\n            :before-close=\"handleClose\">\n            <el-row class=\"flex mb2\">\n                <el-input style=\"width:300px;\" v-model=\"brandName\" :placeholder=\"isMain?'请输入一级分类名称':'请输入二级分类名称'\"></el-input>\n            </el-row>\n            <el-row class=\"flex ruleForm\">\n                <el-row class=\"vFlex\">\n                    <el-upload\n                        class=\"avatar-uploader\"\n                        :before-upload=\"beforeAvatarUpload\"\n                        :action=\"baseUrl+'/admin/upload/img'\"\n                        :show-file-list=\"false\"\n                        :on-success=\"handleAvatarSuccess\"\n                        >\n                        <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n                    </el-upload>\n                    <el-row class=\"mt2\">格式：png、jpg；尺寸：M*N；200K以内</el-row>\n                </el-row>\n            </el-row>\n            <el-row class=\"flex mt2\">\n                <el-button type=\"primary\" @click=\"doSave\">{{isEdit?'保存':'新增'}}</el-button>\n            </el-row>\n        </el-dialog>\n    </div>\n</template>\n<script>\nimport { baseUrl } from '../../../config/env'\nimport { opClass } from '../../../api/getData'\nexport default {\n    data(){\n        return{\n            isEdit:false,//是否编辑\n            isMain:false,//是否操作一级分类\n            dialogVisible:false,\n            title:'新增一级分类',\n            brandName:\"\",\n            logoPic:'',//已存在品牌logo\n            baseUrl:'',\n            imageUrl:'',//上传logo\n            fid:'',//父类id\n            id:'',//当前操作id\n        }\n    },\n    mounted() {\n        this.baseUrl = baseUrl;\n    },\n    methods:{\n        async doSave(){\n            if(!this.brandName){\n                this.$message({\n                    showClose: true,\n                    message: '请输入分类名称',\n                    type: 'warning'\n                });\n                return;\n            }else if(!this.logoPic){\n                this.$message({\n                    showClose: true,\n                    message: '请上传分类图片',\n                    type: 'warning'\n                });\n                return;\n            }\n            let data = {};\n            if(!this.isEdit&&this.isMain){//新增一级分类\n                data = {\n                    cate_name:this.brandName,\n                    image_url:this.logoPic,\n                    fid:this.fid,\n                }\n            }else if(!this.isEdit&&!this.isMain){//新增二级分类\n                data = {\n                    cate_name:this.brandName,\n                    image_url:this.logoPic,\n                    fid:this.id,\n                }\n            }else if(this.isEdit) {\n                data = {\n                    cate_name:this.brandName,\n                    image_url:this.logoPic,\n                    fid:this.fid,\n                    id:this.id\n                }\n            }\n            let res = await opClass(data);\n            if(res.code == 0){\n                this.$message({\n                    showClose: true,\n                    message: '创建成功',\n                    type: 'success'\n                });\n                this.$parent.getData();\n                this.dialogVisible = false;\n            }else{\n                this.$message({\n                    showClose: true,\n                    message: res.message,\n                    type: 'error'\n                });\n            }\n        },\n        showClassPop(type,row){\n            this.dialogVisible = true;\n            this.brandName = '';\n            this.logoPic = '';\n            this.imageUrl = '';\n            if(type==0){\n                this.title = '新增一级分类';\n                this.isMain = true;\n                this.isEdit = false;\n                this.fid = 0;\n                this.id = '';\n            }else if(type==1){\n                this.title = '新增二级分类';\n                this.isMain = false;\n                this.isEdit = false;\n                this.fid = row.fid;\n                this.id = row.id;\n            }else if(type==2){\n                this.title = '编辑分类';\n                this.brandName = row.cate_name;\n                this.logoPic = row.image_url;\n                this.imageUrl = row.image_url_full;\n                if(row.fid==0){\n                    this.isMain = true;\n                }else{\n                    this.isMain = false;\n                }\n                this.fid = row.fid;\n                this.id = row.id;\n                this.isEdit = true;\n            }\n        },\n        handleClose(){\n            this.dialogVisible = false;\n            this.brandName = '';\n            this.logoPic = '';\n            this.imageUrl = '';\n        },\n        beforeAvatarUpload(file){\n            \n            const isPic =  file.type === 'image/png' || file.type === 'image/jpg'|| file.type === 'image/jpeg';\n            const isLt = file.size / 1024 / 1024 < 0.2;\n            \n            if (!isPic) {\n                this.$message.error('上传图片格式有误!');\n                return false;\n            }\n            if (!isLt) {\n                this.$message.error('上传图片大小不能超过 300k!');\n                return false\n            }\n            return true;\n        },\n        handleAvatarSuccess(res, file) {\n            \n            this.imageUrl = URL.createObjectURL(file.raw);\n            this.logoPic = res.data.url;\n            this.imgId = res.data.id;\n        },\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n    .vFlex{\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n    }\n    .flex{\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n    }\n    .mb2{\n        margin-bottom: 20px;\n    }\n    .mt2{\n        margin-top: 20px;\n    }\n    .logo{\n        width: 100px;\n        height: 100px;\n    }\n    .virForm  .avatar-uploader .el-upload {\n        border: 1px dashed #d9d9d9!important;\n        border-radius: 6px;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n    }\n    .avatar-uploader .el-upload:hover {\n        border-color: #409EFF;\n    }\n    .avatar-uploader-icon {\n        font-size: 28px;\n        color: #8c939d;\n        width: 145px;\n        height: 145px;\n        line-height: 145px;\n        text-align: center;\n    }\n    .avatar {\n        width: 145px;\n        height: 145px;\n        display: block;\n    }\n</style>\n\n\n// WEBPACK FOOTER //\n// src/page/goodsManage/components/AddNewClass.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-dialog',{staticClass:\"virForm\",attrs:{\"title\":_vm.title,\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-row',{staticClass:\"flex mb2\"},[_c('el-input',{staticStyle:{\"width\":\"300px\"},attrs:{\"placeholder\":_vm.isMain?'请输入一级分类名称':'请输入二级分类名称'},model:{value:(_vm.brandName),callback:function ($$v) {_vm.brandName=$$v},expression:\"brandName\"}})],1),_vm._v(\" \"),_c('el-row',{staticClass:\"flex ruleForm\"},[_c('el-row',{staticClass:\"vFlex\"},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"before-upload\":_vm.beforeAvatarUpload,\"action\":_vm.baseUrl+'/admin/upload/img',\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})]),_vm._v(\" \"),_c('el-row',{staticClass:\"mt2\"},[_vm._v(\"格式：png、jpg；尺寸：M*N；200K以内\")])],1)],1),_vm._v(\" \"),_c('el-row',{staticClass:\"flex mt2\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.doSave}},[_vm._v(_vm._s(_vm.isEdit?'保存':'新增'))])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-299d89bc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/goodsManage/components/AddNewClass.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-299d89bc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AddNewClass.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddNewClass.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddNewClass.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-299d89bc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./AddNewClass.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-299d89bc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/goodsManage/components/AddNewClass.vue\n// module id = null\n// module chunks = ","<template>\n    <div>\n        <el-row class=\"flex mb2\">\n            <el-col :span=\"20\">\n                <!-- 共有8个一级分类、184个二级分类 -->\n            </el-col>\n            <el-col :span=\"4\">\n                <el-button type=\"primary\" @click=\"addMainClass\">新增一级分类</el-button>\n            </el-col>\n        </el-row>\n        <el-table\n            :data=\"tableData\"\n            row-key=\"id\"\n\n            :tree-props=\"{children: 'son', hasChildren: 'hasSon'}\"\n            style=\"width: 100%\">\n            <el-table-column\n                prop=\"id\"\n                label=\"编号\"\n                >\n            </el-table-column>\n            <el-table-column\n                prop=\"cate_name\"\n                label=\"名称\"\n                >\n            </el-table-column>\n            <el-table-column\n                label=\"分类图\"\n            >\n                <template slot-scope=\"scope\">\n                    <img class=\"smallPic\" \n                        :src=\"scope.row.image_url_full\" alt=\"\" \n                        @click=\"previewImg(scope.row.image_url_full)\"\n                    >\n                </template>\n            </el-table-column>\n            <el-table-column\n                label=\"操作\">\n                <template slot-scope=\"scope\">\n                    <el-button v-if=\"scope.row.fid == 0\" @click=\"addSubClass(scope.row)\" type=\"text\" size=\"small\">添加二级分类</el-button>\n                    <el-button @click=\"editRow(scope.row)\" type=\"text\" size=\"small\">编辑</el-button>\n                    <el-button v-if=\"!scope.row.candel\" @click=\"delRow(scope.row)\" type=\"text\" size=\"small\">删除</el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n        <AddNewClass ref=\"addNewClass\"></AddNewClass>\n        <el-dialog :visible.sync=\"dialogVisible\" >\n            <img width=\"100%\" :src=\"origionPic\" alt=\"\">\n        </el-dialog>\n    </div>\n</template>\n<script>\nimport AddNewClass from './components/AddNewClass'\nimport { classList,delClass } from '../../api/getData'\nexport default {\n    data(){\n        return{\n            baseUrl:'',//上传图片路径\n            dialogVisible:false,\n            page_size:100,\n            curPage:1,\n            total:0,\n            title:'添加',\n            imageUrl:'',\n            imgId:'',\n            tableData: [],\n            origionPic:''\n        }\n    },\n    components: {\n        AddNewClass\n    },\n    mounted() {\n        this.getData();\n    },\n    methods: {\n        previewImg(imgStr){\n            this.dialogVisible = true;\n            this.origionPic = imgStr;\n        },\n        async getData(){\n            let res = await classList({page_size:this.page_size,page:this.curPage});\n            res.data.data.forEach(item => {\n                if(item.son.length){\n                    item.candel = true;\n                }else{\n                    item.candel = false;\n                }\n            });\n            if(res.code==0){\n                this.tableData = res.data.data;\n                this.total = res.data.total;\n            }\n        },\n        addMainClass(){\n            this.$refs.addNewClass.showClassPop(0,'');\n        },\n        addSubClass(row){\n            this.$refs.addNewClass.showClassPop(1,row);\n        },\n        editRow(row){\n            this.$refs.addNewClass.showClassPop(2,row);\n        },\n        async delRow(row){\n            this.$confirm('此操作将删除该分类, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                delClass({id:row.id}).then((res)=>{\n                    if(res.code == 0){\n                        this.$message({\n                            message: '操作成功',\n                            type: 'success'\n                        });\n                        this.getData();\n                    }else{\n                        this.$message.error(res.message);\n                    }\n                });\n            })\n        }\n    },\n}\n</script>\n<style lang=\"scss\" scoped>\n    .flex{\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n    }\n    .mb2{\n        margin-bottom: 20px;\n    }\n    .smallPic{\n        width: 60px;\n        height: 60px;\n    }\n</style>\n\n\n// WEBPACK FOOTER //\n// src/page/goodsManage/ClassifyManage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',{staticClass:\"flex mb2\"},[_c('el-col',{attrs:{\"span\":20}}),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addMainClass}},[_vm._v(\"新增一级分类\")])],1)],1),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"row-key\":\"id\",\"tree-props\":{children: 'son', hasChildren: 'hasSon'}}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"编号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"cate_name\",\"label\":\"名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"分类图\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{staticClass:\"smallPic\",attrs:{\"src\":scope.row.image_url_full,\"alt\":\"\"},on:{\"click\":function($event){return _vm.previewImg(scope.row.image_url_full)}}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.fid == 0)?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.addSubClass(scope.row)}}},[_vm._v(\"添加二级分类\")]):_vm._e(),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.editRow(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),(!scope.row.candel)?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.delRow(scope.row)}}},[_vm._v(\"删除\")]):_vm._e()]}}])})],1),_vm._v(\" \"),_c('AddNewClass',{ref:\"addNewClass\"}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.origionPic,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0f40dc56\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/goodsManage/ClassifyManage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f40dc56\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ClassifyManage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ClassifyManage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ClassifyManage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0f40dc56\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ClassifyManage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0f40dc56\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/goodsManage/ClassifyManage.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}